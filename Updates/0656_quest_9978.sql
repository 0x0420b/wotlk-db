-- q.9978 'By Any Means Necessary'
-- Empoor - gossip corrected
DELETE FROM gossip_menu WHERE entry = 7704;
INSERT INTO gossip_menu (entry, text_id, script_id, condition_id) VALUES
(7704,9405,0,0),
(7704,9425,0,1126);
UPDATE gossip_menu_option SET action_script_id = 770401, condition_id = 1130 WHERE menu_id = 7704;
DELETE FROM dbscripts_on_gossip WHERE id = 770401;
INSERT INTO dbscripts_on_gossip (id,delay,command,datalong,datalong2,buddy_entry,search_radius,data_flags,dataint,dataint2,dataint3,dataint4,x,y,z,o,comments) VALUES
(770401,0,21,1,0,0,0,0,0,0,0,0,0,0,0,0,'active'),
(770401,0,22,14,2,0,0,0,0,0,0,0,0,0,0,0,'Empoor change faction to hostile'),
(770401,0,22,14,2,18483,20,7,0,0,0,0,0,0,0,0,'Empoor change faction to hostile'),
(770401,1,0,0,0,0,0,0,2000001056,0,0,0,0,0,0,0,'Empoor say on start'),
(770401,2,29,1,2,0,0,0,0,0,0,0,0,0,0,0,'Empoor remove gossip flag'),
(770401,2,26,0,0,0,0,0,0,0,0,0,0,0,0,0,'Empoor start attack');
DELETE FROM db_script_string WHERE entry = 2000001056;
INSERT INTO db_script_string (entry, content_default, sound, type, language, emote, comment) VALUES 
(2000001056,'What is the meaning of this?!',0,0,0,0,NULL);
-- fix possibility of player getting stuck if they manage to turn in By Any Means Necessary, but fail to accept Wind Trader Lathrai before Empoor despawns
DELETE FROM conditions WHERE condition_entry IN (1122,1123,1124,1125,1126,1127,1128,1129,1130);
INSERT INTO conditions (condition_entry, type, value1, value2) VALUES
(1130,-2,1129,1128),
(1129,-1,1127,1126),
(1128,9,9978,0), -- Player taken 'By Any Means Necessary'
(1127,-1,1125,1124),
(1126,8,9978,0), -- Player completed 'By Any Means Necessary'
(1125,-3,1123,0),
(1124,-3,1122,0),
(1123,9,9979,0), -- Player not taken 'Wind Trader Lathrai'
(1122,8,9979,0); -- Player not completed 'Wind Trader Lathrai'

-- Update for Empoor & Empoor's Bodyguard
UPDATE creature_template SET MovementType = 2 WHERE entry = 18482;
UPDATE creature SET MovementType = 2, spawndist = 0, spawntimesecs = 60 WHERE id = 18482;
DELETE FROM creature_movement_template WHERE entry = 18482;
INSERT INTO creature_movement_template (entry, point, position_x, position_y, position_z, waittime, script_id, orientation) VALUES
(18482,1,-1933.37,4845.59,1.5204,0,0,0.986134),
(18482,2,-1923.54,4861.7,1.91989,0,0,1.18641),
(18482,3,-1917.69,4879.96,2.10572,0,0,1.47308),
(18482,4,-1917.88,4896.99,2.50701,0,0,1.77153),
(18482,5,-1920.31,4906.5,4.4913,0,0,1.88934),
(18482,6,-1928.2,4926.5,10.5803,0,0,1.96788),
(18482,7,-1935.29,4938.55,15.6007,0,0,2.26633),
(18482,8,-1944.67,4950.83,21.4449,0,0,2.1014),
(18482,9,-1949.78,4960.55,24.2659,0,0,1.94825),
(18482,10,-1953.52,4970.65,26.6008,0,0,1.80688),
(18482,11,-1956.64,4989.63,29.7157,0,0,1.6655),
(18482,12,-1957.7,5004.58,31.4844,0,0,1.61445),
(18482,13,-1957.45,5016.79,32.7002,0,0,1.39847),
(18482,14,-1954.71,5026.52,32.0679,0,0,1.15892),
(18482,15,-1947.61,5037.74,27.0239,0,0,0.942937),
(18482,16,-1938.95,5049.19,21.9406,5000,0,0.935083),
(18482,17,-1945.19,5045.32,24.0255,0,0,3.88033),
(18482,18,-1957.69,5028.63,32.0279,0,0,4.56245),
(18482,19,-1960.63,5017.01,32.8681,0,0,4.52946),
(18482,20,-1961.71,5004.4,31.7404,0,0,4.78078),
(18482,21,-1960.47,4987.74,29.5471,0,0,4.8122),
(18482,22,-1956.12,4968.32,26.1774,0,0,5.05567),
(18482,23,-1948.59,4950.96,21.9587,0,0,5.18526),
(18482,24,-1942.49,4941.91,17.9932,0,0,5.3227),
(18482,25,-1935.67,4931.24,13.3536,0,0,5.20882),
(18482,26,-1927.41,4914.81,7.25069,0,0,5.05959),
(18482,27,-1922,4895.54,2.92562,0,0,4.75329),
(18482,28,-1922.86,4879,2.17167,0,0,4.54124),
(18482,29,-1927.17,4863.81,1.81597,0,0,4.30955),
(18482,30,-1932.85,4851.79,1.62602,0,0,4.11713),
(18482,31,-1944,4834.05,0.863561,0,0,4.18389),
(18482,32,-1953.93,4815.81,0.438465,0,0,4.41479),
(18482,33,-1959.68,4797.62,-0.0637442,0,0,4.61507),
(18482,34,-1960.47,4780.17,-1.09072,0,0,4.75644),
(18482,35,-1958.32,4757.63,-2.43135,0,0,4.99205),
(18482,36,-1949.52,4738.22,-3.19966,0,0,5.1295),
(18482,37,-1943.82,4721.35,-3.08035,0,0,4.8389),
(18482,38,-1942.42,4700.25,-2.45321,0,0,4.6347),
(18482,39,-1944.43,4686.54,-2.20814,0,0,4.35196),
(18482,40,-1953.99,4661.55,-1.34194,0,0,4.35196),
(18482,41,-1957.68,4640.38,-0.241871,0,0,4.68574),
(18482,42,-1955.66,4624.49,0.992076,0,0,4.92529),
(18482,43,-1951.76,4607.54,3.19353,0,0,4.90172),
(18482,44,-1949.85,4591.05,6.1667,0,0,4.72894),
(18482,45,-1951.42,4578.01,8.38071,0,0,4.44227),
(18482,46,-1956.16,4567.23,10.1298,0,0,4.21059),
(18482,47,-1968.48,4551.58,12.4163,0,0,4.08885),
(18482,48,-1975.39,4539.27,13.367,0,0,4.37944),
(18482,49,-1979.38,4522.57,13.1789,0,0,4.61113),
(18482,50,-1981.05,4498.93,12.1197,0,0,4.67004),
(18482,51,-1984.8,4480.95,11.0306,0,0,4.37552),
(18482,52,-1993.32,4465.75,9.7593,0,0,4.14775),
(18482,53,-2004.56,4447.69,7.98966,0,0,4.31269),
(18482,54,-2012.12,4425.16,5.75132,0,0,4.40693),
(18482,55,-2020.31,4404.38,3.52025,0,0,4.25771),
(18482,56,-2032.87,4387.62,2.2344,0,0,4.02602),
(18482,57,-2046.56,4372.37,1.68047,0,0,4.06136),
(18482,58,-2054.12,4358.42,2.12435,0,0,4.34803),
(18482,59,-2057.94,4341.68,2.68454,0,0,4.61113),
(18482,60,-2057.79,4327.7,2.93489,5000,0,4.74857),
(18482,61,-2054.99,4330,2.90677,0,0,1.42634),
(18482,62,-2053.11,4348.42,2.3674,0,0,1.43812),
(18482,63,-2046.31,4364.15,1.80883,0,0,1.08862),
(18482,64,-2033.82,4378.59,1.88512,0,0,0.849069),
(18482,65,-2022.3,4392.58,2.70931,0,0,0.923682),
(18482,66,-2013.96,4405.53,3.75315,0,0,1.18286),
(18482,67,-2007,4428.57,6.33466,0,0,1.33602),
(18482,68,-2000.68,4444.95,7.90293,0,0,1.17501),
(18482,69,-1989.15,4463.19,9.64243,0,0,1.03364),
(18482,70,-1981.34,4480.7,11.0898,0,0,1.3046),
(18482,71,-1977.16,4499.98,12.1438,0,0,1.44205),
(18482,72,-1975.44,4526.34,13.418,0,0,1.48524),
(18482,73,-1969.97,4541.11,13.3088,0,0,1.09647),
(18482,74,-1961.92,4552.28,12.2781,0,0,0.876558),
(18482,75,-1951.15,4566.77,10.0193,0,0,1.22842),
(18482,76,-1945.71,4580.97,7.76211,0,0,1.53865),
(18482,77,-1946.14,4600.95,4.41586,0,0,1.77427),
(18482,78,-1952.98,4623.57,1.14712,0,0,1.86066),
(18482,79,-1952.52,4645.3,-0.622171,0,0,1.44833),
(18482,80,-1947.86,4666.66,-1.44319,0,0,1.25591),
(18482,81,-1940.88,4684.93,-2.16788,0,0,1.31088),
(18482,82,-1938.94,4702.04,-2.49492,0,0,1.51116),
(18482,83,-1940.49,4718.94,-2.90396,0,0,1.72322),
(18482,84,-1945.74,4736.42,-3.18121,0,0,1.91171),
(18482,85,-1952.44,4751.99,-2.84177,0,0,1.87637),
(18482,86,-1956.22,4769.8,-1.69411,0,0,1.60934),
(18482,87,-1956.73,4790.01,-0.530582,0,0,1.54258),
(18482,88,-1953.84,4804.58,0.0684685,0,0,1.23234),
(18482,89,-1949.41,4818.55,0.537813,0,0,1.13417),
(18482,90,-1942.23,4832.62,0.886377,0,0,1.04778);
-- links
DELETE FROM creature_linking WHERE guid = 66606;
INSERT INTO creature_linking (guid, master_guid, flag) VALUES
(66606, 66605, 12929);
